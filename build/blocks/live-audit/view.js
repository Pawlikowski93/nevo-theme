(()=>{"use strict";const e=window.wp.element,s=window.ReactJSXRuntime,a=({title:e,subtitle:a,ctaUrl:i,apiBase:n})=>{const[t,o]=React.useState(""),[l,d]=React.useState(!1),[c,r]=React.useState(null),[u,v]=React.useState(null),_=()=>{o(""),v(null),r(null)},h=({score:e,label:a,size:i="normal"})=>{const n=null===(t=e)?{stroke:"#d1d5db",text:"#9ca3af"}:t>=90?{stroke:"#22c55e",text:"#16a34a"}:t>=50?{stroke:"#f59e0b",text:"#d97706"}:{stroke:"#ef4444",text:"#dc2626"};var t;const o="large"===i?40:32,l=2*Math.PI*o,d=null!==e?l-e/100*l:l,c="large"===i?"nevo-audit__score--large":"";return(0,s.jsxs)("div",{className:`nevo-audit__score ${c}`,children:[(0,s.jsxs)("svg",{className:"nevo-audit__score-svg",viewBox:"0 0 100 100",children:[(0,s.jsx)("circle",{cx:"50",cy:"50",r:o,className:"nevo-audit__score-bg"}),(0,s.jsx)("circle",{cx:"50",cy:"50",r:o,className:"nevo-audit__score-fill",style:{stroke:n.stroke,strokeDasharray:l,strokeDashoffset:d}})]}),(0,s.jsx)("span",{className:"nevo-audit__score-value",style:{color:n.text},children:null!==e?e:"?"}),(0,s.jsx)("span",{className:"nevo-audit__score-label",children:a})]})},m=({passed:e,label:a,value:i})=>(0,s.jsxs)("div",{className:"nevo-audit__check",children:[(0,s.jsx)("div",{className:"nevo-audit__check-icon "+(e?"nevo-audit__check-icon--pass":"nevo-audit__check-icon--fail"),children:e?(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),(0,s.jsxs)("div",{className:"nevo-audit__check-content",children:[(0,s.jsx)("div",{className:"nevo-audit__check-label "+(e?"":"nevo-audit__check-label--fail"),children:a}),i&&(0,s.jsx)("div",{className:"nevo-audit__check-value",children:i})]})]}),x=({issue:e})=>(0,s.jsxs)("div",{className:"nevo-audit__issue",children:[(0,s.jsx)("span",{className:`nevo-audit__issue-badge nevo-audit__issue-badge--${e.severity}`,children:"high"===e.severity?"Krytyczny":"medium"===e.severity?"WaÅ¼ny":"Sugestia"}),(0,s.jsx)("span",{className:"nevo-audit__issue-text",children:e.message})]});return u?(0,s.jsxs)("div",{className:"nevo-audit nevo-audit--report",children:[(0,s.jsxs)("div",{className:"nevo-audit__report-header",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"nevo-audit__report-title",children:"Raport dla"}),(0,s.jsx)("p",{className:"nevo-audit__report-domain",children:u.domain})]}),(0,s.jsx)("button",{onClick:_,className:"nevo-audit__close",children:(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsxs)("div",{className:"nevo-audit__scores",children:[(0,s.jsx)(h,{score:u.scores.performance,label:"WydajnoÅ›Ä‡",size:"large"}),(0,s.jsx)(h,{score:u.scores.seo,label:"SEO",size:"large"}),(0,s.jsx)(h,{score:u.scores.accessibility,label:"DostÄ™pnoÅ›Ä‡",size:"large"})]}),(0,s.jsxs)("div",{className:"nevo-audit__section",children:[(0,s.jsx)("h3",{className:"nevo-audit__section-title",children:"Szybka diagnoza"}),(0,s.jsxs)("div",{className:"nevo-audit__checks",children:[(0,s.jsx)(m,{passed:u.checks.ssl.passed,label:u.checks.ssl.label,value:u.checks.ssl.passed?"https://":"http://"}),(0,s.jsx)(m,{passed:u.checks.mobile.passed,label:u.checks.mobile.label}),(0,s.jsx)(m,{passed:u.checks.loadingTime.passed,label:`Czas Å‚adowania: ${u.checks.loadingTime.label}`}),(0,s.jsx)(m,{passed:u.seo.h1.passed,label:u.seo.h1.passed?"NagÅ‚Ã³wek H1 obecny":"Brak nagÅ‚Ã³wka H1",value:u.seo.h1.value})]})]}),(0,s.jsxs)("div",{className:"nevo-audit__section",children:[(0,s.jsx)("h3",{className:"nevo-audit__section-title",children:"Analiza SEO"}),(0,s.jsxs)("div",{className:"nevo-audit__seo-items",children:[(0,s.jsxs)("div",{className:"nevo-audit__seo-item",children:[(0,s.jsxs)("div",{className:"nevo-audit__seo-header",children:[(0,s.jsx)("span",{children:"Title tag"}),(0,s.jsxs)("span",{className:"nevo-audit__seo-badge "+(u.seo.title.passed?"nevo-audit__seo-badge--pass":"nevo-audit__seo-badge--fail"),children:[u.seo.title.length," znakÃ³w"]})]}),(0,s.jsx)("p",{className:"nevo-audit__seo-value",children:u.seo.title.value||(0,s.jsx)("em",{className:"nevo-audit__seo-empty",children:"Brak"})})]}),(0,s.jsxs)("div",{className:"nevo-audit__seo-item",children:[(0,s.jsxs)("div",{className:"nevo-audit__seo-header",children:[(0,s.jsx)("span",{children:"Meta description"}),(0,s.jsxs)("span",{className:"nevo-audit__seo-badge "+(u.seo.description.passed?"nevo-audit__seo-badge--pass":"nevo-audit__seo-badge--fail"),children:[u.seo.description.length," znakÃ³w"]})]}),(0,s.jsx)("p",{className:"nevo-audit__seo-value",children:u.seo.description.value||(0,s.jsx)("em",{className:"nevo-audit__seo-empty",children:"Brak"})})]})]})]}),u.issues.length>0&&(0,s.jsxs)("div",{className:"nevo-audit__section nevo-audit__section--issues",children:[(0,s.jsxs)("h3",{className:"nevo-audit__section-title",children:[(0,s.jsx)("span",{className:"nevo-audit__issue-count",children:u.issueCount}),u.summary]}),(0,s.jsx)("div",{className:"nevo-audit__issues",children:u.issues.map((e,a)=>(0,s.jsx)(x,{issue:e},a))})]}),(0,s.jsxs)("div",{className:"nevo-audit__cta",children:[(0,s.jsx)("h3",{className:"nevo-audit__cta-title",children:u.issueCount>0?"Chcesz naprawiÄ‡ te problemy?":"Chcesz jeszcze lepsze wyniki?"}),(0,s.jsx)("p",{className:"nevo-audit__cta-text",children:"UmÃ³w bezpÅ‚atnÄ… konsultacjÄ™. OmÃ³wimy TwÃ³j raport i pokaÅ¼emy, jak poprawiÄ‡ widocznoÅ›Ä‡ i konwersje."}),(0,s.jsxs)("div",{className:"nevo-audit__cta-buttons",children:[(0,s.jsxs)("a",{href:i,className:"nevo-audit__cta-primary",children:["UmÃ³w rozmowÄ™",(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]}),(0,s.jsx)("button",{onClick:_,className:"nevo-audit__cta-secondary",children:"SprawdÅº innÄ… stronÄ™"})]})]})]}):(0,s.jsxs)("div",{className:"nevo-audit nevo-audit--form",children:[(0,s.jsxs)("div",{className:"nevo-audit__header",children:[(0,s.jsx)("div",{className:"nevo-audit__icon",children:(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,s.jsx)("path",{d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,s.jsx)("h2",{className:"nevo-audit__title",children:e}),(0,s.jsx)("p",{className:"nevo-audit__subtitle",children:a})]}),(0,s.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),t.trim()){d(!0),r(null),v(null);try{const e=await fetch(`${n}/audit-url?url=${encodeURIComponent(t.trim())}`),s=await e.json();s.success?v(s):r(s.message||"Nie udaÅ‚o siÄ™ przeanalizowaÄ‡ strony.")}catch(e){r("WystÄ…piÅ‚ bÅ‚Ä…d poÅ‚Ä…czenia. SprÃ³buj ponownie.")}finally{d(!1)}}},className:"nevo-audit__form",children:[(0,s.jsxs)("div",{className:"nevo-audit__input-wrapper",children:[(0,s.jsxs)("svg",{className:"nevo-audit__input-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,s.jsx)("path",{d:"M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"})]}),(0,s.jsx)("input",{type:"text",value:t,onChange:e=>o(e.target.value),placeholder:"np. mojafirma.pl",className:"nevo-audit__input",disabled:l})]}),(0,s.jsx)("button",{type:"submit",disabled:l||!t.trim(),className:"nevo-audit__submit",children:l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"nevo-audit__spinner"}),"AnalizujÄ™..."]}):(0,s.jsxs)(s.Fragment,{children:["Analizuj",(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})})]}),c&&(0,s.jsx)("div",{className:"nevo-audit__error",children:c}),l&&(0,s.jsxs)("div",{className:"nevo-audit__progress",children:[(0,s.jsxs)("div",{className:"nevo-audit__progress-item nevo-audit__progress-item--active",children:[(0,s.jsx)("span",{className:"nevo-audit__spinner"}),"Sprawdzam prÄ™dkoÅ›Ä‡ Å‚adowania..."]}),(0,s.jsx)("div",{className:"nevo-audit__progress-item",children:"AnalizujÄ™ SEO..."}),(0,s.jsx)("div",{className:"nevo-audit__progress-item",children:"Sprawdzam bezpieczeÅ„stwo..."})]}),(0,s.jsxs)("div",{className:"nevo-audit__features",children:[(0,s.jsx)("span",{children:"ğŸ”’ Bezpieczne"}),(0,s.jsx)("span",{children:"âš¡ Wynik w 15s"}),(0,s.jsx)("span",{children:"ğŸ’° Za darmo"})]})]})};document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".nevo-live-audit").forEach(i=>{const n={title:i.dataset.title||"SprawdÅº swojÄ… stronÄ™ za darmo",subtitle:i.dataset.subtitle||"Wpisz adres strony i w 15 sekund dowiedz siÄ™, co moÅ¼na poprawiÄ‡",ctaUrl:i.dataset.ctaUrl||"#kontakt",apiBase:i.dataset.apiBase||"https://n8n.nevomarketing.pl/webhook"};(0,e.createRoot)(i).render((0,s.jsx)(a,{...n}))})})})();